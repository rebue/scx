<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="axios.js"></script>
</head>
<body>
third party demo
</body>
<script>
    axios.defaults.baseURL = 'http://127.0.0.1:30010';

    function getCode() {
        const idx = window.location.href.indexOf('?');
        if (idx < 0) {
            return '';
        }
        const kvs = window.location.href.split('?')[1].split('&');
        for (let i = 0; i < kvs.length; ++i) {
            const kv = kvs[i].split('=');
            if (kv[0] === 'code') {
                return kv[1];
            }
        }
        return '';
    }

    const code = getCode();
    if (code) {
        axios({
            url: `/callback?code=${code}`,
            method: 'get'
        }).then(console.log);
    }
</script>
</html>